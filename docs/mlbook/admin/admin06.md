# 流程审批设计
### 概述
---------------
&emsp;&emsp;审批流程是重要的功能之一，它可以帮助组织自动化和简化复杂的审批流程。  
&emsp;&emsp;审批流程设置是一种通过可视化界面进行配置和管理的功能。它允许用户定义和设计各种审批流程，例如请假申请、费用报销、合同审批等。通过此功能，组织可以提高审批效率、减少人工错误和提升工作流程的透明度。

### 应用场景
---------------
审批流程设置适用于各种组织和行业的审批需求；例如：  
* 请假流程：员工可以提交请假申请，经过审批人的批准后获得有效的请假记录。  
* 费用报销流程：员工可以提交费用报销申请，审批人可以审核并批准该报销申请。  
* 合同审批流程：合同草案可以通过审批流程进行审查和核准，确保合同符合要求。  

### 角色/状态描述
---------------
审批流程中涉及到的角色包括：  
* 发起人：发起人是发起审批流程的人员，他们提交审批申请，并提供相关的申请信息。  
* 审批人：审批人是负责审核和决策审批流程的人员，他们根据设定的规则和条件对申请进行批准或拒绝。  
* 抄送人：抄送人是在审批流程中被通知和关注的人员，他们不直接参与决策，但可以获得有关审批进展的通知。  

&emsp;&emsp;每个角色在审批流程中的具体权限和责任可以根据组织的需求和工作流程进行调整和定义。通过灵活配置审批流程，可以减少繁琐的手动审批步骤，提高审批效率和准确性。帮助企业更轻松地定制和管理其独特的审批需求。

审批流程中涉及到的审批状态包括：  
* 草稿：新建记录未提交审核时的状态  
* 审批中：记录已提交正在审批中的状态  
* 审批通过：审批人员已同意的状态  
* 驳回：审批人员已驳回记录的状态（可根据审批意见修改后再次提交）  
* 撤回：记录的发起者在审批流程中撤回了申请  
* 撤销：审批通过后由管理员撤销，可根据需要修改后再次提交  

### 流程设计
---------------
&emsp;&emsp;美乐低代码审批流程支持复杂的多条件分支，可设置不同条件不同流程和审批人。支持指定审批人或自选审批人，审批结果抄送给指定用户，同时也支持多人审批会签与或签，在审批的同时还可以支持修改部分关键信息字段。

![审批流程](https://mldocs.ks3-cn-beijing.ksyuncs.com/%E6%B5%81%E7%A8%8B%E5%AE%A1%E6%89%B9%E8%AE%BE%E8%AE%A1/%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1.png)

**配置审批流程**

* 添加审批流程  
进入系统管理 - 审批流程，点击右上角添加按钮，打开添加审批流程弹框：

![审批流程](https://mldocs.ks3-cn-beijing.ksyuncs.com/%E6%B5%81%E7%A8%8B%E5%AE%A1%E6%89%B9%E8%AE%BE%E8%AE%A1/%E6%B7%BB%E5%8A%A0%E5%AE%A1%E6%89%B9%E6%B5%81%E7%A8%8B.png)

标记区域内容为：  
1.选择应用实体：该审批流程所应用到的实体  
2.名称：该审批流程名称  
选择/填写完成后点击 [确定] 按钮，系统将进入下一步对流程进行设计。

* 流程设计  
流程设计是指在低代码平台中，对流程中各个环节进行规划和定义，以确保流程的高效执行和优化。

![审批流程](https://mldocs.ks3-cn-beijing.ksyuncs.com/%E6%B5%81%E7%A8%8B%E5%AE%A1%E6%89%B9%E8%AE%BE%E8%AE%A1/%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1%E5%BC%B9%E6%A1%86.png)

标记区域内容为：  
1.流程发起人，可以指定流程的发起人，非流程发起人无法使用此流程提交，支持自定义设置发起条件，只有符合条件的记录才可以使用/选择该流程。
![流程发起人](https://mldocs.ks3-cn-beijing.ksyuncs.com/%E6%B5%81%E7%A8%8B%E5%AE%A1%E6%89%B9%E8%AE%BE%E8%AE%A1/%E6%B5%81%E7%A8%8B%E5%8F%91%E8%B5%B7%E4%BA%BA.png)

2.添加审批节点（审批人、抄送人）或新的条件分支。  
3.审批节点：对审批人进行配置。  
4.抄送节点：配置流程相关信息的通知人，但他们不需要进行批准或拒绝操作  
5.条件分支：可以根据需要添加多个分支，根据特定条件的结果来确定后续的流程路径。例如，如果某个条件满足，流程将进入一个分支；如果条件不满足，流程将进入另一个分支。  
6.设置条件：设置条件分支中的逻辑条件，这些条件可以基于字段值、用户角色、日期等进行设置，以决定流程的执行路径。
![设置条件](https://mldocs.ks3-cn-beijing.ksyuncs.com/%E6%B5%81%E7%A8%8B%E5%AE%A1%E6%89%B9%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E7%BD%AE%E6%9D%A1%E4%BB%B6.png)

7.审批人配置：
* 配置在审批节点上需要执行批准或拒绝操作的具体人员。这可以是单个人员、角色或者在条件满足时动态确定的人员。  
![审批人配置](https://mldocs.ks3-cn-beijing.ksyuncs.com/%E6%B5%81%E7%A8%8B%E5%AE%A1%E6%89%B9%E8%AE%BE%E8%AE%A1/%E5%AE%A1%E6%89%B9%E4%BA%BA%E9%85%8D%E7%BD%AE.png)

* 同时，可以灵活配置是否允许自选审核人、转审、加签操作  
设置审批规则（会签/或签）：会签需要所有审批人同意，或签仅需一个审批人同意  
![灵活配置](https://mldocs.ks3-cn-beijing.ksyuncs.com/%E6%B5%81%E7%A8%8B%E5%AE%A1%E6%89%B9%E8%AE%BE%E8%AE%A1/%E4%BC%9A%E7%AD%BE%E6%88%96%E7%AD%BE.png)

* 允许修改字段：  
可修改内容字段定义了在流程执行过程中可以由审批人员进行修改的字段，由于记录进入审批后即自动变为只读状态，如需要对记录中的某些字段进行补充填写，可通过 允许修改字段 选项进行配置，如下图所示  
![允许修改字段](https://mldocs.ks3-cn-beijing.ksyuncs.com/%E6%B5%81%E7%A8%8B%E5%AE%A1%E6%89%B9%E8%AE%BE%E8%AE%A1/%E5%85%81%E8%AE%B8%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5.png)

8.抄送人配置：抄送人配置确定了在抄送节点上需要通知的人员。抄送人可以是单个人员、角色或外部人员。  
![抄送人配置](https://mldocs.ks3-cn-beijing.ksyuncs.com/%E6%B5%81%E7%A8%8B%E5%AE%A1%E6%89%B9%E8%AE%BE%E8%AE%A1/%E6%8A%84%E9%80%81%E4%BA%BA%E9%85%8D%E7%BD%AE.png)

### 流程设计
---------------
&emsp;&emsp;如果某审批流程正在被使用（即使用此流程的记录处于“审批中”状态），则无法修改、删除。如遇流程变动，可以将原审批流程禁用（禁用后不影响现有审批使用，只是无法提交新的），并复制一个新的，对新的审批流程进行修改后使用。

### 数据约束
---------------
&emsp;&emsp;如果记录的审批状态为 审批中 或 审批通过，则记录为只读状态无法进行修改/删除（其明细记录同样无法修改/删除/添加）。如需修改审批后的记录，需由管理员对其进行撤销；如需在审批过程中修改某些字段，可通过审批节点中的 允许修改字段 进行配置。


